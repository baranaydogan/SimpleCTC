INCLUDE(CheckIncludeFile)

find_path (MPI_DIR include/mpi.h
  HINTS ENV MPI_DIR
  PATHS
  /usr/lib/openmpi 		#Debian
  $ENV{HOME}/openmpi
  DOC "MPI Directory")

SET(MPI_INCLUDE_DIR "${MPI_DIR}/include")
CHECK_INCLUDE_FILE( ${MPI_INCLUDE_DIR}/mpi.h HAVE_MPI_H )
FIND_LIBRARY(MPI_LIB_MPI MPI )
SET(MPI_LIBRARIES ${MPI_LIB_MPI} CACHE STRING "MPI libraries" FORCE)
if (HAVE_MPI_H AND MPI_DIR AND MPI_LIBRARIES )
  set(HAVE_MPI 1)
  set(MPI_FOUND ON)
endif()
set(MPI_INCLUDES ${MPI_INCLUDE_DIR} CACHE STRING "MPI include path" FORCE)
MARK_AS_ADVANCED( MPI_DIR MPI_LIB_MPI MPI_INCLUDES MPI_LIBRARIES )
